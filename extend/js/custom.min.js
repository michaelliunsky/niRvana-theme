function getCookieExpireTime(){const e=new Date;return e.setHours(23,59,59,999),e.toGMTString()}function applyNightMode(e){document.body.classList.toggle("night",e),$(".colorSwitch").length&&$(".colorSwitch").attr("class",`colorSwitch fa ${e?"fa-sun":"fas fa-moon"}`)}function switchNightMode(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)night\s*=\s*([^;]*).*$)|^.*$/,"$1")||"0",t="0"===e;applyNightMode(t),document.cookie=`night=${t?"1":"0"};path=/;expires=${getCookieExpireTime()}`}function initNightMode(){const e=window.pandastudio_framework,t=e&&e.dark_mode||{},{enable:o="unchecked",auto:n="unchecked",time_start:i="19:00",time_end:c="07:00"}=t;if("checked"!==o)return document.cookie="night=0;path=/;expires="+getCookieExpireTime(),applyNightMode(!1);const s=document.cookie.replace(/(?:(?:^|.*;\s*)night\s*=\s*([^;]*).*$)|^.*$/,"$1");if(s)return applyNightMode("1"===s);if("checked"===n){const e=()=>{const e=new Date,[t,o]=i.split(":").map(Number),[n,s]=c.split(":").map(Number),r=60*e.getHours()+e.getMinutes(),d=60*t+o,a=60*n+s,l=d>a?r>=d||r<a:r>=d&&r<a;applyNightMode(l)};e(),setInterval(e,6e4)}else document.cookie=`night=0;path=/;expires=${getCookieExpireTime()}`,applyNightMode(!1)}function addCopyButtonToCodeBlock(e){const t=e.querySelector("code"),o=document.createElement("button"),n=document.createTextNode("Copy Code");o.appendChild(n),o.style.cssText="\n    position: absolute;\n    top: 0;\n    right: 0;\n    margin: 4px;\n    padding: 4px 8px;\n    font-size: 12px;\n    background-color: rgba(200, 200, 200, 0.2);\n    color: #fff;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: all 0.2s ease-in-out;\n    z-index: 1000;\n  ",o.addEventListener("mouseenter",()=>{o.style.backgroundColor="rgba(0, 0, 0, 0.1)"}),o.addEventListener("mouseleave",()=>{o.style.backgroundColor="rgba(200, 200, 200, 0.2)"}),o.addEventListener("click",()=>{const e=document.createRange();e.selectNode(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e),document.execCommand("copy"),n.removeAllRanges(),o.innerText="Copied!",o.style.backgroundColor="#333",o.style.color="#fff",setTimeout(()=>{o.innerText="Copy Code",o.style.backgroundColor="rgba(200, 200, 200, 0.2)",o.style.color="#fff"},3e3)}),e.style.position="relative",e.insertBefore(o,t)}function initCodeBlocks(){document.querySelectorAll(".wp-block-code").forEach(addCopyButtonToCodeBlock),document.querySelectorAll(".wp-block-code pre").forEach(e=>{e.style.color="#fff"})}function initCommentCodeHighlight(){$(".comments pre").each(function(e,t){const o=$(t).children("code"),n=o.length>0?o.get(0):t;$(n).hasClass("hljs")||$(n).parent().hasClass("disable_highlightjs")||(hljs.highlightBlock(n),hljs.lineNumbersBlock(n,{singleLine:!0}))})}function initCardHoverAnimations(){jQuery(document).ready(e=>{e(".postLists.lists .card h2, .pf_hotposts h4").hover(function(){e(this).stop().animate({marginLeft:"15px"},300)},function(){e(this).stop().animate({marginLeft:"0px"},300)}),e(".postLists.lists .card h2, .pf_hotposts h4").click(function(){const t=this.textContent;e(this).text("正在努力加载中 …"),setTimeout(()=>{e(this).text(t)},2011)})})}document.addEventListener("DOMContentLoaded",()=>{initCodeBlocks(),initCommentCodeHighlight(),initCardHoverAnimations(),initNightMode()}),add_action("ajax_render_complete",()=>{initCodeBlocks(),document.querySelectorAll(".wp-block-code pre").forEach(e=>{e.style.color="#fff"})});