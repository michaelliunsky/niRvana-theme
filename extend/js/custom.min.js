function getCookieExpireTime(){const e=new Date;return e.setHours(23,59,59,999),e.toUTCString()}function getCookie(e){if("undefined"==typeof document||!document.cookie)return"";const t=document.cookie.split("; ").find(t=>t.startsWith(e+"="));return t?decodeURIComponent(t.split("=")[1]||""):""}function setCookie(e,t){const o=encodeURIComponent(String(t));document.cookie=`${e}=${o}; path=/; expires=${getCookieExpireTime()}`}function deleteCookie(e){document.cookie=`${e}=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT`}function applyNightMode(e){document.body.classList.toggle("night",e);const t=document.querySelector(".colorSwitch");t&&(t.className=`colorSwitch fas ${e?"fa-sun":"fa-moon"}`)}function switchNightMode(){const e=!document.body.classList.contains("night");applyNightMode(e),setCookie("night",e?"1":"0")}function parseTimeToMinutes(e){if("string"!=typeof e)return null;const t=/^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])$/;if(!t.test(e.trim()))return null;const o=e.split(":"),n=parseInt(o[0],10),i=parseInt(o[1],10);return n<0||n>23||i<0||i>59?null:60*n+i}function initNightMode(){const e=(window.pandastudio_framework||{}).dark_mode||{},{enable:t="unchecked",auto:o="unchecked"}=e;if(autoNightTimer&&(clearInterval(autoNightTimer),autoNightTimer=null),"checked"!==t)return deleteCookie("night"),applyNightMode(!1);const n=getCookie("night");if(""!==n)return applyNightMode("1"===n);if("checked"!==o)return deleteCookie("night"),applyNightMode(!1);const i={start:"19:00",end:"07:00"},s=null!==parseTimeToMinutes(e.time_start)&&void 0!==parseTimeToMinutes(e.time_start)?parseTimeToMinutes(e.time_start):parseTimeToMinutes(i.start),r=null!==parseTimeToMinutes(e.time_end)&&void 0!==parseTimeToMinutes(e.time_end)?parseTimeToMinutes(e.time_end):parseTimeToMinutes(i.end),c=()=>{if(""!==getCookie("night"))return;const e=new Date,t=60*e.getHours()+e.getMinutes(),o=s>r?t>=s||t<r:t>=s&&t<r;applyNightMode(o)};c(),autoNightTimer=setInterval(c,6e4)}function addCopyButtonToCodeBlock(e){const t=e.querySelector("code"),o=document.createElement("button"),n=document.createTextNode("Copy Code");o.appendChild(n),o.style.cssText="\n    position: absolute;\n    top: 0;\n    right: 0;\n    margin: 4px;\n    padding: 4px 8px;\n    font-size: 12px;\n    background-color: rgba(200, 200, 200, 0.2);\n    color: #fff;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: all 0.2s ease-in-out;\n    z-index: 1000;\n  ",o.addEventListener("mouseenter",()=>{o.style.backgroundColor="rgba(0, 0, 0, 0.1)"}),o.addEventListener("mouseleave",()=>{o.style.backgroundColor="rgba(200, 200, 200, 0.2)"}),o.addEventListener("click",()=>{const e=document.createRange();e.selectNode(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e),document.execCommand("copy"),n.removeAllRanges(),o.innerText="Copied!",o.style.backgroundColor="#333",o.style.color="#fff",setTimeout(()=>{o.innerText="Copy Code",o.style.backgroundColor="rgba(200, 200, 200, 0.2)",o.style.color="#fff"},3e3)}),e.style.position="relative",e.insertBefore(o,t)}function initCodeBlocks(){document.querySelectorAll(".wp-block-code").forEach(addCopyButtonToCodeBlock),document.querySelectorAll(".wp-block-code pre").forEach(e=>{e.style.color="#fff"})}function initCommentCodeHighlight(){$(".comments pre").each(function(e,t){const o=$(t).children("code"),n=o.length>0?o.get(0):t;$(n).hasClass("hljs")||$(n).parent().hasClass("disable_highlightjs")||(hljs.highlightBlock(n),hljs.lineNumbersBlock(n,{singleLine:!0}))})}function initCardHoverAnimations(){jQuery(document).ready(e=>{e(".postLists.lists .card h2, .pf_hotposts h4").hover(function(){e(this).stop().animate({marginLeft:"15px"},300)},function(){e(this).stop().animate({marginLeft:"0px"},300)}),e(".postLists.lists .card h2, .pf_hotposts h4").click(function(){const t=this.textContent;e(this).text("正在努力加载中 …"),setTimeout(()=>{e(this).text(t)},2011)})})}let autoNightTimer=null;document.addEventListener("DOMContentLoaded",()=>{initCodeBlocks(),initCommentCodeHighlight(),initCardHoverAnimations(),initNightMode()}),add_action("ajax_render_complete",()=>{initCodeBlocks(),document.querySelectorAll(".wp-block-code pre").forEach(e=>{e.style.color="#fff"})});